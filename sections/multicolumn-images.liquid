{% if section.blocks.size > 0 %}
    <section class="multicolumn-images-section">
        {% if section.settings.heading != blank %}
            <div class="heading">
                <h2>{{ section.settings.heading }}</h2>
                {% if section.settings.subheading != blank %}
                    <p>{{ section.settings.subheading }}</p>
                {% endif %}
            </div>
        {% endif %}
        <div class="multicolumn-images-wrapper row--{{ section.blocks.size }}">
            {% if section.blocks.size == 2 %}
                {% for block in section.blocks %}
                    <div class="multicolumn-image-item {% if block.settings.caption == blank %}no-caption{% endif %}" {% if block.settings.caption == blank %}style="margin-top: 27px"{% endif %}>
                        <a href="{{ block.settings.link }}">
                            {% if block.settings.caption != blank %}
                                <span class="image-caption">{{ block.settings.caption }}</span>
                            {% endif %}
                            {% assign width = block.settings.image.width | plus: 0.0 %}
                            {% assign height = block.settings.image.height | plus: 0.0 %}
                            {% assign padding = height | divided_by: width | times: 100 %}
                            <div class="image-warpper" style="padding-bottom: {{padding}}%;">
                                {% if block.settings.image != blank %}
                                    <img src="{{ block.settings.image | img_url: '1200x' }}" class="small-hide">
                                    {% assign mobile_image = block.settings.mobile_image | default: block.settings.image %}
                                    <img src="{{ mobile_image | img_url: '750x' }}" class="large-up-hide medium-hide">
                                {% endif %}
                            </div>
                        </a>
                    </div>
                {% endfor %}
            {% elsif section.blocks.size == 3 %}
                {% for block in section.blocks %}
                    {% if forloop.index == 1 %}
                        <div class="columns-col-1">
                    {% elsif forloop.index == 2 %}
                        <div class="columns-col-2">
                    {% endif %}
                    <div class="multicolumn-image-item">
                        <a href="{{ block.settings.link }}">
                            {% if block.settings.caption %}
                                <span class="image-caption">{{ block.settings.caption }}</span>
                            {% endif %}
                            {% assign width = block.settings.image.width | plus: 0.0 %}
                            {% assign height = block.settings.image.height | plus: 0.0 %}
                            {% assign padding = height | divided_by: width | times: 100 %}
                            <div class="image-warpper" style="padding-bottom: {{padding}}%;">
                                {% if block.settings.image != blank %}
                                    <img src="{{ block.settings.image | img_url: '1200x' }}" class="small-hide">
                                    {% assign mobile_image = block.settings.mobile_image | default: block.settings.image %}
                                    <img src="{{ mobile_image | img_url: '750x' }}" class="large-up-hide medium-hide">
                                {% endif %}
                            </div>
                        </a>
                    </div>
                    {% if forloop.index == 1 %}
                        </div>                            
                    {% elsif forloop.index == 3 %}
                        </div>
                    {% endif %}
                {% endfor %}  
            {% endif %}
            
        </div>
        {% if section.settings.btn_label != blank and section.settings.btn_link != blank %}
            <a class="btn btn--outline link-slider" href="{{ section.settings.btn_link }}">
                <span class="slider-text-1">{{ section.settings.btn_label }}</span>
                <span class="slider-text-2">{{ section.settings.btn_label }}</span>
            </a>
        {% endif %}
    </section>
{% endif %}

{% schema %}
{
    "name": "Multicolumn Images",
    "settings": [
        {
            "type": "text",
            "id": "heading",
            "label": "Heading"
        },
        {
            "type": "text",
            "id": "subheading",
            "label": "SubHeading"
        },
        {
            "type": "text",
            "id": "btn_label",
            "label": "Button Label"
        },
        {
            "type": "url",
            "id": "btn_link",
            "label": "Button Link"
        }
    ],
    "blocks": [
        {
            "type": "image_column",
            "name": "Image Column",
            "settings": [
                {
                    "type": "text",
                    "id": "caption",
                    "label": "Image Caption"
                },
                {
                    "type": "image_picker",
                    "id": "image",
                    "label": "Image"
                },
                {
                    "type": "image_picker",
                    "id": "mobile_image",
                    "label": "Mobile Image"
                },
                {
                    "type": "url",
                    "id": "link",
                    "label": "Link"
                }
            ]
        }
    ],
    "max_blocks": 3,
    "presets": [
        {
            "name": "Multicolumn Images"
        }
    ]
}
{% endschema %}